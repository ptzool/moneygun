<%= render PageComponent.new(title: "Time Entry Details") do |component| %>
  <% component.with_action_list do %>
    <%= link_to "Calendar View", calendar_organization_task_task_timetrackings_path(@organization, @task), class: "btn btn-secondary" %>
    <%= link_to "List View", organization_task_task_timetrackings_path(@organization, @task), class: "btn btn-secondary" %>
    <%= link_to "Edit", edit_organization_task_task_timetracking_path(@organization, @task, @task_timetracking), class: "btn btn-secondary" if policy(@task_timetracking).edit? %>
    <div class="inline-block">
      <%= button_to "Delete", organization_task_task_timetracking_path(@organization, @task, @task_timetracking), method: :delete, data: { turbo_confirm: "Are you sure?" }, class: "btn btn-danger" if policy(@task_timetracking).destroy? %>
    </div>
  <% end %>
<% end %>
<div class="card shadow">
  <div class="card-body">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <h3 class="text-lg font-semibold mb-4">Time Entry Information</h3>
        <div class="space-y-4">
          <div>
            <span class="text-gray-600 font-medium">Task:</span>
            <div class="mt-1"><%= @task_timetracking.task.name %></div>
          </div>
          <div>
            <span class="text-gray-600 font-medium">Tracked by:</span>
            <div class="mt-1"><%= @task_timetracking.membership.user.full_name %></div>
          </div>
          <div>
            <span class="text-gray-600 font-medium">Date:</span>
            <div class="mt-1"><%= @task_timetracking.date.strftime('%B %d, %Y') %></div>
          </div>
        </div>
      </div>
      <div>
        <h3 class="text-lg font-semibold mb-4">Time Details</h3>
        <div class="space-y-4">
          <div>
            <span class="text-gray-600 font-medium">Start Time:</span>
            <div class="mt-1"><%= @task_timetracking.start&.strftime('%H:%M') || 'Not specified' %></div>
          </div>
          <div>
            <span class="text-gray-600 font-medium">End Time:</span>
            <div class="mt-1"><%= @task_timetracking.end&.strftime('%H:%M') || 'Not specified' %></div>
          </div>
          <div>
            <span class="text-gray-600 font-medium">Duration:</span>
            <div class="mt-1"><%= number_with_precision(@task_timetracking.duration_in_hours, precision: 2) %> hours (<%= @task_timetracking.duration %> minutes)</div>
          </div>
        </div>
      </div>
    </div>
    <div class="mt-6 pt-4 border-t border-gray-200">
      <h3 class="text-lg font-semibold mb-2">Time Entry History</h3>
      <div>
        <span class="text-gray-600 font-medium">Created:</span>
        <span class="ml-2"><%= @task_timetracking.created_at.strftime('%B %d, %Y at %H:%M') %></span>
      </div>
      <div>
        <span class="text-gray-600 font-medium">Last Updated:</span>
        <span class="ml-2"><%= @task_timetracking.updated_at.strftime('%B %d, %Y at %H:%M') %></span>
      </div>
    </div>
  </div>
</div>
